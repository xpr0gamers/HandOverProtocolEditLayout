sap.ui.define(["./BaseController"],function(e){"use strict";return e.extend("sap.Beutlhauser.HandOverProtocolEditLayout.controller.CalcBuilderFreeTextDialog",{onInit:function(){},showDialog:function(e,t){this.oDialog=this.getView().getContent()[0];this.oCriteria=e;this.oCallbackChange=t;const i=this.getModel().getProperty("/oCriteriaSet");const o=this.getFixedValuesToCriteria(e.Criteria,i);this.setModel(new sap.ui.model.json.JSONModel({oFixedValues:o,sExpression:e.ExpressionFreeTextAvailable}));this.oDialog.open()},getFixedValuesToCriteria:function(e,t){const i=t.find(function(t){return t.Key===e});const o=i.Key.split(";");const s=i.Description.split(",");const n=[];o.forEach(function(e,t){n.push({sKey:e,sValue:s[t]})});return n},onCloseDialog:function(){this.oDialog.close()},onCriteriaSelect:function(e){const t=e.getParameter("item").getBindingContext().getProperty("sKey");this.getView().byId("builderFreetext").updateOrCreateItem('"'+t+'"')},onSave:function(){const e=this.getView().byId("builderFreetext").getExpression();this.oDialog.setBusy(true);const t=this.getModel("handoverLayout").createKey("/CriteriaItemSet",{Guid:this.oCriteria.Guid});const i={ExpressionFreeTextAvailable:e};this.getModel("handoverLayout").update(t,i,{success:function(){this.oDialog.setBusy(false);this.oDialog.close();if(this.oCallbackChange){this.oCallbackChange(e)}}.bind(this),error:function(){this.oDialog.setBusy(false)}.bind(this)})}})});