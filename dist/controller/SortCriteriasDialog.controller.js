sap.ui.define(["./BaseController"],function(t){"use strict";return t.extend("sap.Beutlhauser.HandOverProtocolEditLayout.controller.SortCriteriasDialog",{onInit:function(){},showDialog:function(t,e){this.oDialog=this.getView().getContent()[0];this.oCallbackChange=e;this.setModel(new sap.ui.model.json.JSONModel({oHeadlineItem:t}));this.oDialog.open()},onCloseDialog:function(){this.oDialog.close()},onDown:function(){const t=this.byId("tableSortCriterias");const e=t.indexOfItem(t.getSelectedItem());t.removeSelections();const o=t.getItems();const s=o[e];t.removeItem(e);if(e===o.length-1){t.insertItem(s,0)}else{t.insertItem(s,e+1)}s.setSelected(true)},onUp:function(){const t=this.byId("tableSortCriterias");const e=t.indexOfItem(t.getSelectedItem());t.removeSelections();const o=t.getItems();const s=o[e];t.removeItem(e);if(e===0){t.insertItem(s,o.length-1)}else{t.insertItem(s,e-1)}s.setSelected(true)},onSaveOrder:function(){this.oDialog.setBusy(true);const t=this.getView().byId("tableSortCriterias").getItems();const e=[];t.forEach(function(t,o){const s=t.getBindingContext().getObject();e.push(s);const i=this.getModel("handoverLayout").createKey("/CriteriaItemSet",{Guid:s.Guid});const n={SortPosition:o};this.getModel("handoverLayout").update(i,n,{groupId:"sort"})}.bind(this));this.getModel("handoverLayout").setDeferredGroups(["sort"]);this.getModel("handoverLayout").submitChanges({groupId:"sort",success:function(){this.oDialog.setBusy(false);this.oDialog.close();if(this.oCallbackChange){this.oCallbackChange(e)}}.bind(this),error:function(){this.oDialog.setBusy(false)}.bind(this)})}})});