sap.ui.define(["./BaseController"],function(t){"use strict";return t.extend("sap.Beutlhauser.HandOverProtocolEditLayout.controller.SortCriteriasDialog",{onInit:function(){},showDialog:function(t,e){this.oDialog=this.getView().getContent()[0];this.oCallbackChange=e;this.setModel(new sap.ui.model.json.JSONModel({oHeadlineItem:t}));this.oDialog.open()},onCloseDialog:function(){this.oDialog.close()},onDown:function(t){const e=t.getSource().getParent().getParent();const o=e.indexOfItem(t.getSource().getParent());const n=e.getItems();const s=n[o];e.removeItem(o);if(o===n.length-1){e.insertItem(s,0)}else{e.insertItem(s,o+1)}},onUp:function(t){const e=t.getSource().getParent().getParent();const o=e.indexOfItem(t.getSource().getParent());const n=e.getItems();const s=n[o];e.removeItem(o);if(o===0){e.insertItem(s,n.length-1)}else{e.insertItem(s,o-1)}},onSaveOrder:function(){this.oDialog.setBusy(true);const t=this.getView().byId("tableSortCriterias").getItems();const e=[];t.forEach(function(t,o){const n=t.getBindingContext().getObject();e.push(n);const s=this.getModel("handoverLayout").createKey("/CriteriaItemSet",{Guid:n.Guid});const i={SortPosition:o};this.getModel("handoverLayout").update(s,i,{groupId:"sort"})}.bind(this));this.getModel("handoverLayout").setDeferredGroups(["sort"]);this.getModel("handoverLayout").submitChanges({groupId:"sort",success:function(){this.oDialog.setBusy(false);this.oDialog.close();if(this.oCallbackChange){this.oCallbackChange(e)}}.bind(this),error:function(){this.oDialog.setBusy(false)}.bind(this)})}})});